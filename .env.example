# ============================================================================
# Databricks Chat App Template - Environment Configuration
# ============================================================================
#
# ‚ö†Ô∏è IMPORTANT FIRST STEPS:
# 1. Copy this file: cp .env.example .env
# 2. Fill in your Databricks credentials below
# 3. Never commit .env to git (it contains secrets!)
#
# üí° Need help? See README.md section "Quick Start"
#
# ============================================================================

# ============================================================================
# DATABRICKS CONFIGURATION (REQUIRED)
# ============================================================================
#
# These settings connect your app to your Databricks workspace.
# You MUST configure these for the app to work.

# ----------------------------------------------------------------------------
# Databricks Workspace URL
# ----------------------------------------------------------------------------
# ‚ö†Ô∏è REQUIRED: Your Databricks workspace URL
#
# üìç Where to find it:
#    1. Log into your Databricks workspace
#    2. Copy the URL from your browser address bar
#    3. It should look like: https://[your-workspace].cloud.databricks.com
#
# ‚ö†Ô∏è COMMON MISTAKES:
#    ‚ùå http://... (missing 's' - must be https://)
#    ‚ùå https://databricks.com (wrong - need your specific workspace URL)
#    ‚ùå Missing the https:// prefix
#    ‚ùå Trailing slash at the end
#
# ‚úÖ CORRECT FORMAT:
DATABRICKS_HOST=https://your-workspace.cloud.databricks.com
#
# üí° EXAMPLES:
#    DATABRICKS_HOST=https://e2-demo.cloud.databricks.com
#    DATABRICKS_HOST=https://my-company-prod.cloud.databricks.com

# ----------------------------------------------------------------------------
# Databricks Personal Access Token
# ----------------------------------------------------------------------------
# ‚ö†Ô∏è REQUIRED: Your personal access token for authentication
#
# üìç How to create a token:
#    1. In Databricks UI, click your username (top right)
#    2. Go to: Settings > Developer > Access Tokens
#    3. Click "Generate New Token"
#    4. Give it a comment (e.g., "Chat App Development")
#    5. Set lifetime (e.g., 90 days) or leave blank for no expiration
#    6. Click "Generate"
#    7. Copy the token immediately (you won't see it again!)
#    8. Paste it below
#
# ‚ö†Ô∏è SECURITY WARNING:
#    - Never commit this token to git!
#    - Never share it with anyone!
#    - Regenerate it if compromised!
#
# ‚úÖ CORRECT FORMAT (starts with "dapi"):
DATABRICKS_TOKEN=dapi...paste-your-full-token-here
#

# ============================================================================
# DATABASE CONFIGURATION (REQUIRED)
# ============================================================================
#
# The app needs a database to store sessions, messages, and configuration.
# Choose ONE of the options below based on your environment.

# ----------------------------------------------------------------------------
# Option 1: PostgreSQL (RECOMMENDED FOR LOCAL DEVELOPMENT)
# ----------------------------------------------------------------------------
# This works best for local development on your laptop/desktop.
# The quickstart script will set this up automatically for macOS.
#
# ‚úÖ CORRECT FORMAT:
DATABASE_URL=postgresql://localhost:5432/chat_template
#
# üí° EXPLANATION:
#    postgresql://  - Database type (PostgreSQL)
#    localhost      - Database host (your computer)
#    5432           - PostgreSQL default port
#    chat_template  - Database name
#
# ‚ö†Ô∏è IF YOU GET "connection refused" ERRORS:
#    1. Make sure PostgreSQL is installed: psql --version
#    2. Make sure PostgreSQL is running: brew services list
#    3. Make sure database exists: createdb chat_template
#    4. Run: ./quickstart/setup_database.sh

# ----------------------------------------------------------------------------
# Option 2: Lakebase (FOR PRODUCTION ON DATABRICKS)
# ----------------------------------------------------------------------------
# Lakebase is automatically configured when deploying to Databricks Apps.
# You don't need to set this manually - it's set by the deployment process.
#
# Format (for reference only, don't set manually):
# DATABASE_URL=databricks://token:${DATABRICKS_TOKEN}@${DATABRICKS_HOST}?http_path=/sql/1.0/warehouses/${WAREHOUSE_ID}&catalog=${CATALOG}&schema=${SCHEMA}
#
# üí° TIP: Deployment handles this automatically, so leave it as PostgreSQL
#         for local development.

# ----------------------------------------------------------------------------
# Option 3: Remote PostgreSQL (ADVANCED)
# ----------------------------------------------------------------------------
# If you have a remote PostgreSQL instance (AWS RDS, etc.)
#
# Format:
# DATABASE_URL=postgresql://username:password@hostname:5432/database_name
#
# üí° EXAMPLE:
#    DATABASE_URL=postgresql://admin:secret@mydb.us-east-1.rds.amazonaws.com:5432/chatapp

# ============================================================================
# DEVELOPMENT ENVIRONMENT (OPTIONAL - Auto-set by start_app.sh)
# ============================================================================
#
# These settings are automatically set by ./start_app.sh for local development.
# You usually don't need to change these.

# Environment mode: development, staging, or production
ENVIRONMENT=development

# Development user information
# (used when real authentication is not available in local mode)
DEV_USER_ID=dev@local.dev
DEV_USER_EMAIL=dev@local.dev
DEV_USERNAME="Dev User"

# ============================================================================
# LOGGING (OPTIONAL)
# ============================================================================
#
# Control how much logging the app produces.
# Options: DEBUG, INFO, WARNING, ERROR, CRITICAL
#
# üí° TIPS:
#    - Use DEBUG when developing/troubleshooting
#    - Use INFO for normal operation
#    - Use WARNING or ERROR for production
#
LOG_LEVEL=DEBUG

# ============================================================================
# QUICK CHECKLIST - Did you...?
# ============================================================================
#
# ‚úÖ Copy this file to .env?                    cp .env.example .env
# ‚úÖ Set DATABRICKS_HOST to your workspace URL?
# ‚úÖ Set DATABRICKS_TOKEN to your access token?
# ‚úÖ Set DATABASE_URL to postgresql://localhost:5432/chat_template?
# ‚úÖ Run the setup script?                      ./quickstart/setup.sh
# ‚úÖ Start the app?                             ./start_app.sh
#
# ‚ö†Ô∏è IF SOMETHING ISN'T WORKING:
#    1. Check logs: tail -f logs/backend.log
#    2. Verify Databricks connection: Check if token is valid
#    3. Verify database: psql -d chat_template -c "\dt"
#    4. See troubleshooting: README.md "Troubleshooting" section
#
# üí° NEED MORE HELP?
#    - README.md - Full setup guide
#    - COMMON_MISTAKES.md - Solutions to common problems
#    - quickstart/TROUBLESHOOTING.md - Detailed troubleshooting guide
#
# ============================================================================
